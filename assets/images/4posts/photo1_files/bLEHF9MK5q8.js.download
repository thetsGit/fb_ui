if (self.CavalryLogger) { CavalryLogger.start_js(["SrRwK8Q"]); }

__d("VideoPlayerHTML5ApiCea608State",["Bootloader","Deferred","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this,d=a.onReady,e=a.onCaptionsLoaded,f=a.captionsDisplay;this.$1=null;this.$2=[];this.$3=null;this.$4={changedCount:0,dequeuedCount:0,erroredCount:0,processedCount:0,processStartedCount:0,queuedCount:0};this.source=null;this.captionsDisplay=null;this.$1=c("Bootloader").loadModules(["VideoPlayerCea608CaptionsSource"],function(a){a=new a({onCaptionsLoaded:e,onCaptionsChanged:function(a,c){b.$4.changedCount++,b.captionsDisplay&&b.captionsDisplay.handleCaptionsChanged(a,c)}});b.source=a;b.captionsDisplay=f;d(b)},"VideoPlayerHTML5ApiCea608State")}var b=a.prototype;b.enqueueBytes=function(a){this.$4.queuedCount++,this.$2.push(a),this.$5()};b.processQueue=function(){this.$5()};b.getStats=function(){return this.$4};b.getCurrentScreenRepresentation=function(){return this.source?this.source.getCurrentScreenRepresentation():null};b.destroy=function(){this.$1&&(this.$1.remove(),this.$1=null),this.captionsDisplay&&(this.captionsDisplay.destroy(),this.captionsDisplay=null),this.source&&(this.source.destroy(),this.source=null),this.$4={changedCount:0,dequeuedCount:0,erroredCount:0,processedCount:0,processStartedCount:0,queuedCount:0}};b.$5=function(){var a=this,b=this.source;if(!b)return;var d=this.$2,e=this.$3,f=function(){var f=d.shift();if(!e){var g=new(c("Deferred"))();g.resolve();e=g.getPromise()}a.$4.dequeuedCount++;a.$3=e=e.then(function(){a.$4.processStartedCount++;return b.processBytes(f).then(function(){a.$4.processedCount++})["catch"](function(b){a.$4.erroredCount++,c("FBLogger")("video").catching(b).mustfix("[VideoPlayerHTML5ApiCea608State] Caught error from CEA-608 source processBytes")})})};while(d.length)f()};return a}();g["default"]=a}),98);